---
title: Git cheatsheet
categories: 
  - Dev
---

## Exclude a directory
Create a `.gitignore` file in root, and add the directory name in it
```
/dirName
```

## Remove directory from git and local
```
git rm -r dirName
git commit -m "Remove directory"
git push origin [you-git-branch]
```

## Remove directory from git but NOT local
```
git rm -r --cached dirName
```
## Remove `.DS_Store`
```
# Remove existing files from the repository
find . -name .DS_Store -print0 | xargs -0 git rm -f --ignore-unmatch
# Add the line to `.gitignore`
.DS_Store
# git commands
git add .gitignore
git commit -m ".DS_Store removed"
```

## Delete master branch
First delete `master` in the local repo. To do this we first make a new branch call `placeholder`, and delete `master` from there:

```
git branch placeholder
git checkout placeholder
git branch -D master
```

We next want to delete the branch on github. However, if we do this the naive way:
```
git push origin :master
```

we will get error like this:

```
remote: error: refusing to delete the current branch: refs/heads/master
To git@github.com:matthew-brett/datarray.git
! [remote rejected] master (deletion of the current branch prohibited)
error: failed to push some refs to 'git@github.com:matthew-brett/datarray.git'
```

This is because github is looking at the `master` branch to provide the web content when you browse the remote repo. So we first have to make github look at our `placeholder` branch instead, then delete `master`.

First push up the `placeholder` branch

```
git checkout placeholder
git push origin placeholder
```

Then set `placeholder` to be the github default branch. Go to the page of remote repo, then select `Settings`>`Branches`. Under `Default branch`, switch the default branch from `master` to `placeholder`. Now you can delete the `master` branch

```
git push origin :master
```