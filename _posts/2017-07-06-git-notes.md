---
title: Git cheatsheet
categories: 
  - Dev
---

## Exclude a directory
Create a `.gitignore` file in root, and add the directory name in it
```shell
/dirName
```

## Remove directory from git and local
```shell
git rm -r dirName
git commit -m "Remove directory"
git push origin [you-git-branch]
```

## Remove directory from git but NOT local
```shell
git rm -r --cached dirName
```
## Remove `.DS_Store`
```shell
# Remove existing files from the repository
find . -name .DS_Store -print0 | xargs -0 git rm -f --ignore-unmatch
# Add the line to `.gitignore`
.DS_Store
# git commands
git add .gitignore
git commit -m ".DS_Store removed"
```

## Delete master branch
First delete `master` in the local repo. To do this we first make a new branch call `placeholder`, and delete `master` from there:

```shell
git branch placeholder
git checkout placeholder
git branch -D master
```

We next want to delete the branch on github. However, if we do this the naive way:
```shell
git push origin :master
```

we will get error like this:

```shell
remote: error: refusing to delete the current branch: refs/heads/master
To git@github.com:matthew-brett/datarray.git
! [remote rejected] master (deletion of the current branch prohibited)
error: failed to push some refs to 'git@github.com:matthew-brett/datarray.git'
```

This is because github is looking at the `master` branch to provide the web content when you browse the remote repo. So we first have to make github look at our `placeholder` branch instead, then delete `master`.

First push up the `placeholder` branch

```shell
git checkout placeholder
git push origin placeholder
```

Then set `placeholder` to be the github default branch. Go to the page of remote repo, then select `Settings`>`Branches`. Under `Default branch`, switch the default branch from `master` to `placeholder`. Now you can delete the `master` branch

```shell
git push origin :master
```

## Create project page
**Project page** are kept in the same repository as their project. The URL for the project page is `https:://<username>.github.io/<projectname>`. The steps for creating a project page are as follows

* You can build and publish Project Pages sites from the `master` and `gh-pages` branch. You can also publish your site from a `/docs` folder on your `master` branch.
* To publish your site's source files from a `/docs` folder on your `master` branch, you must have a `master` branch and your repository must:
	* have a `/docs` folder in the root of the repository
	* not follow the repository naming scheme `<username>.github.io` or `<orgname>.github.io
* Under your repository name, click `Setting` > `Options` > `Github Pages` > `Source`. Select **master branch /docs folder** from the drop-down menu as your Github Pages publishing source. (This option will not appear if the `/docs` folder doesn't exist on the `master` branch.)